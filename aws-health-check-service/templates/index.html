<!DOCTYPE html>
<html>
<head>
    <title>AWS Compotant Health Check</title>
    <style>
        body { font-family: Arial; margin: 40px; }
        .step { margin: 10px 0; }
        .success { color: green; }
        .error { color: red; }
        pre { background: #f4f4f4; padding: 10px; }
    </style>
</head>
<body>

<h2>AWS YAML Health Check</h2>

<form id="uploadForm">
    <input type="file" name="file" accept=".yml,.yaml" required />
    <br><br>
    <button type="submit">Upload & Validate</button>
</form>

<div id="status"></div>
<pre id="result"></pre>

<script>
document.getElementById("uploadForm").addEventListener("submit", async function(e) {
    e.preventDefault();
    document.getElementById("status").innerHTML = "Processing...";
    document.getElementById("result").textContent = "";

    const formData = new FormData(this);

    const response = await fetch("/upload", {
        method: "POST",
        body: formData
    });

    const data = await response.json();

    let statusHtml = "";
    data.steps.forEach(step => {
        statusHtml += <div class="step ${step.status}">${step.message}</div>;
    });

    document.getElementById("status").innerHTML = statusHtml;
    document.getElementById("result").textContent = JSON.stringify(data.health_report, null, 2);
});
</script>

</body>
</html>